FRAG
PROPERTY FS_COLOR0_WRITES_ALL_CBUFS 1
DCL IN[0], COLOR, COLOR
DCL IN[1], GENERIC[0], PERSPECTIVE
DCL IN[2], GENERIC[1], PERSPECTIVE
DCL OUT[0], COLOR
DCL SAMP[0]
DCL SAMP[1]
DCL SAMP[2]
DCL TEMP[0..2]
  0: TEX TEMP[0], IN[1], SAMP[0], 2D
  1: TEX TEMP[1].xyz, IN[1], SAMP[1], 2D
  2: LRP TEMP[2].xyz, TEMP[1], IN[0], TEMP[0]
  3: TEX TEMP[1].w, IN[2], SAMP[2], 2D
  4: MUL OUT[0].xyz, TEMP[2], TEMP[1].wwww
  5: MUL OUT[0].w, IN[0].wwww, TEMP[0].wwww
  6: END
